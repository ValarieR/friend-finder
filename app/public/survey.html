<!DOCTYPE html>
<html>

<head>
    <title>Friend Finder</title>
    <!--Link to Favicon-->
    <link rel="icon" href="foodie.ico" type="image/x-icon">
    <!-- Viewport setting -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Fonts Link -->
    <link href="https://fonts.googleapis.com/css?family=Homemade+Apple" rel="stylesheet">
    <!-- Link to Materialize Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <!-- JQuery Link -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <!-- Personal CSS Link -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
<main>
    <div class="parallax-container">
        <div class="parallax"><img src="css/images/parallax1.jpeg"></div>
    </div>
    <div class="section white">
        <div class="row container">
            <!--begin survey with name and img request-->
            <div class="row">
                <form class="col s12">
                    <div class="row">
                        <div class="input-field col s6">
                            <i class="material-icons prefix">account_circle</i>
                            <input placeholder="First Name" id="name" type="text" class="form-control validate">
                            <label for="name">First Name</label>
                        </div>
                        <div class="input-field col s6">
                            <i class="material-icons prefix">camera</i>
                            <input placeholder="img link" id="img" type="text" class="form-control validate">
                            <label for="img">Please provide a link to your photo</label>
                        </div>
                    </div>
                </form>
            </div>
            <!--begin survey questions -->
            <ul class="collapsible" data-collapsible="accordion">
                <!-- Q1 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> I prefer Salty
                            to Sweet.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q1">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q2 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Pineapple is a delightful pizza topping.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q2">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q3 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Bacon fills my soul with glee.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q3">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q4 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Doughnuts are a reasonable choice as a
                        complete breakfast.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q4">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q5 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Eating steak "well-done" is repugnant, and a
                        crime against nature.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q5">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q6 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> It is worth it to have to eat Ramen for a
                        week if going to an exciting, yet expensive, restaurant uses up my entire grocery
                        budget.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q6">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q7 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Cake > Sex</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q7">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q8 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Give me MEAT! We didn't claw our way up the
                        food chain to eat salad!</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q8">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q9 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> I live each day in search of umami.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q9">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q10 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Putine is one of my favorite foods, and I
                        praise the French for their culinary savvy.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q10">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
            </ul>
            <div class="row center">
                <div class="col s12">
                    <button id="submitInfo" class="btn red darken-4" type="submit" name="action">Submit
                        <i class="material-icons right">send</i>
                    </button>
                </div>
            </div>
        </div>
    </div>



    <div class="parallax-container">
        <div class="parallax"><img src="css/images/parallax1.jpeg"></div>
    </div>

    <!-- Modal Structure -->
    <div id="modal1" class="modal">
        <!-- modal content -->
        <div class="modal-content">
            <h4>Meet your new Foodie Friend!</h4>
            <h2 id="matchName"></h2>
            <img id="matchImg" src="">
        </div>
        <div class="modal-footer">
            <!--<a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>-->
        </div>
    </div>


</main>
<footer class="page-footer center-align green darken-3">
    <div class="container">
        <div class="row">
            <div class="container copy">
                <span id="signature"><a href="https://valarier.github.io/valarie-regas/index.html" target="_blank">&copy 2017 Valarie Regas</a></span>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript" src="survey.js"></script>
<script>
    $(document).ready(function () {

        console.log("JS is linked");

        // initializes the select dropdowns
        $('select').material_select();

        // helps with select form validation
        $("select[required]").css({display: "block", height: 0, padding: 0, width: 0, position: 'absolute'});

        // inits parallax
        $('.parallax').parallax();

        // inits collapsible answer selections
        $('.collapsible').collapsible();

        // inits and modifies the new friend modal
        $('.modal').modal({
                dismissible: true, // Modal can be dismissed by clicking outside of the modal
                opacity: .5, // Opacity of modal background
                inDuration: 300, // Transition in duration
                outDuration: 200, // Transition out duration
                startingTop: '4%', // Starting top style attribute
                endingTop: '10%', // Ending top style attribute
//                ready: function(modal, trigger) { // Callback for Modal open. Modal and trigger parameters available.
//                    alert("Ready");
//                    console.log(modal, trigger);
//                },
//                complete: function() { alert('Closed'); } // Callback for Modal close
            }
        );

        // main on click that calls all the things
        $("#submitInfo").on("click", function () {
            event.preventDefault();

            // validate that everything was filled out
            function formValidation() {
                var valid = true;
                $('.form-control').each(function () {
                    if ( $(this).val() === '')
                        valid = false;
                    alert("Please complete the form to continue.")
                });
                $('.chosen').each(function () {
                    if ( $(this).val() === '')
                        valid = false;
                    alert("Please select a level of agreement for each statement.")
                });
                return valid;
            };


            // make a new foodie
            function makeFriend() {

                if (formValidation() == true) {
                    var newFriend = {
                        name: $("#name").val(),
                        photo: $("#img").val(),
                        scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(),]
                    }
                }
                return newFriend;
            };

            // add new person to the friends API
            function addToApi() {
                $.post("/api/friends", newFriend, function (data) {
                    if (data) {
                        console.log("new friend added")
                    } else {
                        console.log("new friend NOT added")
                    }
                });
            };




            // function to match the new person and display it
            function bestMatch() {


                // activate the modal with best match
                $("#modal1").modal('open');
            };

            // $("#submitInfo").on("click", function (event) {
            //     event.preventDefault();

            formValidation();
            makeFriend();
            bestMatch();
            addToApi();
            // close of on click
        });


// Close of doc ready
    });
</script>

</body>

</html>
