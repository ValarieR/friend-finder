<!DOCTYPE html>
<html>

<head>
    <title>Friend Finder</title>
    <!--Link to Favicon-->
    <link rel="icon" href="foodie.ico" type="image/x-icon">
    <!-- Viewport setting -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Fonts Link -->
    <link href="https://fonts.googleapis.com/css?family=Homemade+Apple" rel="stylesheet">
    <!-- Link to Materialize Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <!-- JQuery Link -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <!-- Personal CSS Link -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
<main>
    <div class="parallax-container">
        <div class="parallax"><img src="css/images/parallax1.jpeg"></div>
    </div>
    <div class="section white">
        <div class="row container">
            <!--begin survey with name and img request-->
            <div class="row">
                <form class="col s12">
                    <div class="row">
                        <div class="input-field col s6">
                            <i class="material-icons prefix">account_circle</i>
                            <input placeholder="First Name" id="name" type="text" class="form-control validate">
                            <label for="name">First Name</label>
                        </div>
                        <div class="input-field col s6">
                            <i class="material-icons prefix">camera</i>
                            <input placeholder="img link" id="img" type="text" class="form-control validate">
                            <label for="img">Please provide a link to your photo</label>
                        </div>
                    </div>
                </form>
            </div>
            <!--begin survey questions -->
            <ul class="collapsible popout" data-collapsible="accordion">
                <!-- Q1 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> I prefer Salty
                            to Sweet.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select id="q1">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                        <label>Click to select an answer</label>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q2 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Pineapple is a delightful pizza topping.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q2">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q3 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Bacon fills my soul with glee.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q3">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q4 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Doughnuts are a reasonable choice as a
                        complete breakfast.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q4">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q5 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Eating steak "well-done" is repugnant, and a
                        crime against nature.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q5">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q6 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> It is worth it to have to eat Ramen for a
                        week if going to an exciting, yet expensive, restaurant uses up my entire grocery
                        budget.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q6">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q7 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Cake > Sex</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q7">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q8 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Give me MEAT! We didn't claw our way up the
                        food chain to eat salad!</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q8">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q9 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> I live each day in search of umami.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q9">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
                <!-- Q10 -->
                <li>
                    <div class="collapsible-header"><p><i class="material-icons prefix">star</i> Putine is one of my favorite foods, and I
                        praise the French for their culinary savvy.</p>
                    </div>
                    <div class="collapsible-body">
                        <form>
                            <span>
                                <div class="input-field">
                                    <select class="chosen" id="q10">
                                        <option value="" disabled selected>Click to select answer</option>
                                        <option value="1">STRONGLY DISAGREE</option>
                                        <option value="2">Somewhat Disagree</option>
                                        <option value="3">Neutral</option>
                                        <option value="4">Somewhat Agree</option>
                                        <option value="5">STRONGLY AGREE</option>
                                    </select>
                                </div>
                            </span>
                        </form>
                    </div>
                </li>
            </ul>
            <div class="row center">
                <div class="col s12">
                    <button id="submitInfo" class="btn red darken-4" type="submit" name="action">Submit
                        <i class="material-icons right">send</i>
                    </button>
                </div>
                <div>
                    <a href="/api/friends" target="_blank" class="green-text text-darken-4">API Friends | </a>
                    <a href="https://github.com/ValarieR/friend-finder" target="_blank" class="green-text text-darken-4">GitHub</a>
                </div>
            </div>
        </div>
    </div>



    <div class="parallax-container">
        <div class="parallax"><img src="css/images/parallax1.jpeg"></div>
    </div>


</main>
<footer class="page-footer center-align green darken-3">
    <div class="container">
        <div class="row">
            <div class="container copy">
                <span id="signature"><a href="https://valarier.github.io/valarie-regas/index.html" target="_blank">&copy 2017 Valarie Regas</a></span>
            </div>
        </div>
    </div>
</footer>

<!-- Modal Structure -->
<div id="modal1" class="modal">
    <!-- modal content -->
    <div class="modal-content">
        <div class="container">
            <div class="row">
                <h5>Meet your new Foodie Friend!</h5>
                <h4 id="matchName"></h4>
            </div>
            <img id="matchImg" src="">
        </div>
    </div>
    <div class="modal-footer">
        <!--<a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>-->
    </div>
</div>


<script>
    $(document).ready(function () {

        console.log("JS is linked");

        // initializes the select dropdowns
        $('select').material_select();

        // inits parallax
        $('.parallax').parallax();

        // inits collapsible answer selections
        $('.collapsible').collapsible();

        // inits and modifies the new friend modal
        $('.modal').modal({
                dismissible: true, // Modal can be dismissed by clicking outside of the modal
                opacity: .5, // Opacity of modal background
                inDuration: 300, // Transition in duration
                outDuration: 200, // Transition out duration
                startingTop: '4%', // Starting top style attribute
                endingTop: '10%', // Ending top style attribute
            }
        );


        // main on click that calls all the things
        $("#submitInfo").on("click", function () {
            event.preventDefault();


            // validate that everything was filled out
            function formValidation() {
                var valid = true;
                $('.form-control').each(function () {
                    if ( $(this).val() === '')
                        valid = false;

                });

                $('select').each(function () {
                    if ($(this).val() !== '') {
                    } else valid = false;

                });
                return valid;
            }


                if (formValidation() === true) {
                    var newFriend = {
                        name: $("#name").val(),
                        photo: $("#img").val(),
                        scores: [$("#q1").val(),
                            $("#q2").val(),
                            $("#q3").val(),
                            $("#q4").val(),
                            $("#q5").val(),
                            $("#q6").val(),
                            $("#q7").val(),
                            $("#q8").val(),
                            $("#q9").val(),
                            $("#q10").val(),]
                    };



                var currentURL = window.location.origin;
                    $.post(currentURL + "/api/friends", newFriend, function (data) {

                        $("#matchName").text(data.name);
                        $("#matchImg").attr("src", data.img);
                        $("#matchImg").addClass("responsive-img circle");

                        // activate the modal with best match
                        $("#modal1").modal('open');

//                        if (data) {
//                            console.log("new friend added")
//                        } else {
//                            console.log("new friend NOT added")
//                        }
                    });
                }

            formValidation();

            // close of on click
        });


// Close of doc ready
    });
</script>

</body>

</html>
